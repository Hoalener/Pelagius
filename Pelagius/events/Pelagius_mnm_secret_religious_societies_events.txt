#MISSIONS

#Mission tombola
character_event = {
    id = MNM.3000
    hide_window = yes

    is_triggered_only = yes
    
    trigger = {
    	society_member_of = secret_religious_cult
		is_society_grandmaster = no
		has_any_quest = no
		NOT = { is_inaccessible_trigger = yes }
		NOT = { has_character_modifier = quest_cooldown_timer }
    }

    immediate = {
    	random_society_member = {
			limit = {
				is_society_grandmaster = yes
				same_society_as = ROOT
			}
			save_event_target_as = society_leader
		}

		random_list = {
			10 = { #Induct a ruler
				modifier = {
					factor = 0
					ai = yes
				}
				modifier = {
					factor = 0
					society_rank < 2
				}
				modifier = {
					factor = 0
					NOT = {
						top_liege = { 
							any_realm_lord = { 
								ok_sr_induction_mission_target_trigger = yes
							} 
						}
					}
				}
				event_target:society_leader	= { character_event = { id = MNM.3400 } }
			}
			10 = { #Make ruler sympathetic
				modifier = {
					factor = 0
					ai = yes
				}
				modifier = {
					factor = 0
					NOT = {
						top_liege = { 
							any_realm_lord = { 
								ok_sr_sympathy_mission_target_trigger = yes
							} 
						}
					}
				}
                trigger = {
                    society_rank > 1
                }
				event_target:society_leader	= { character_event = { id = MNM.3402 } }
			}
			10 = { # Prepare Grounds
				modifier = {
					factor = 0
					society_rank < 3
				}
				modifier = {
					factor = 0
					NOT = {
						any_demesne_province = {
							OR = {
                                AND = {
                                    ROOT = { secret_religion = catholic }
                                    NOR = {
                                        religion = catholic
                                        has_province_modifier = secret_catholic_community
                                    }
                                }
								AND = {
                                    ROOT = { secret_religion = cathar }
                                    NOR = {
                                        religion = cathar
                                        has_province_modifier = secret_cathar_community
                                    }
                                }
								AND = {
                                    ROOT = { secret_religion = fraticelli }
                                    NOR = {
                                        religion = fraticelli
                                        has_province_modifier = secret_fraticelli_community
                                    }
                                }
								AND = {
                                    ROOT = { secret_religion = waldensian }
                                    NOR = {
                                        religion = waldensian
                                        has_province_modifier = secret_waldensian_community
                                    }
                                }
								AND = {
                                    ROOT = { secret_religion = lollard }
                                    NOR = {
                                        religion = lollard
                                        has_province_modifier = secret_lollard_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = orthodox }
                                    NOR = {
                                        religion = orthodox
                                        has_province_modifier = secret_orthodox_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = miaphysite }
                                    NOR = {
                                        religion = miaphysite
                                        has_province_modifier = secret_miaphysite_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = monophysite }
                                    NOR = {
                                        religion = monophysite
                                        has_province_modifier = secret_monophysite_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = bogomilist }
                                    NOR = {
                                        religion = bogomilist
                                        has_province_modifier = secret_bogomilist_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = monothelite }
                                    NOR = {
                                        religion = monothelite
                                        has_province_modifier = secret_monothelite_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = iconoclast }
                                    NOR = {
                                        religion = iconoclast
                                        has_province_modifier = secret_iconoclast_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = paulician }
                                    NOR = {
                                        religion = paulician
                                        has_province_modifier = secret_paulician_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = nestorian }
                                    NOR = {
                                        religion = nestorian
                                        has_province_modifier = secret_nestorian_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = messalian }
                                    NOR = {
                                        religion = messalian
                                        has_province_modifier = secret_messalian_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = sunni }
                                    NOR = {
                                        religion = sunni
                                        has_province_modifier = secret_sunni_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = zikri }
                                    NOR = {
                                        religion = zikri
                                        has_province_modifier = secret_zikri_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = yazidi }
                                    NOR = {
                                        religion = yazidi
                                        has_province_modifier = secret_yazidi_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = ibadi }
                                    NOR = {
                                        religion = ibadi
                                        has_province_modifier = secret_ibadi_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = kharijite }
                                    NOR = {
                                        religion = kharijite
                                        has_province_modifier = secret_kharijite_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = shiite }
                                    NOR = {
                                        religion = shiite
                                        has_province_modifier = secret_shiite_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = druze }
                                    NOR = {
                                        religion = druze
                                        has_province_modifier = secret_druze_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = hurufi }
                                    NOR = {
                                        religion = hurufi
                                        has_province_modifier = secret_hurufi_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = jewish }
                                    NOR = {
                                        religion = jewish
                                        has_province_modifier = secret_jewish_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = karaite }
                                    NOR = {
                                        religion = karaite
                                        has_province_modifier = secret_karaite_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = samaritan }
                                    NOR = {
                                        religion = samaritan
                                        has_province_modifier = secret_samaritan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = zoroastrian }
                                    NOR = {
                                        religion = zoroastrian
                                        has_province_modifier = secret_zoroastrian_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = mazdaki }
                                    NOR = {
                                        religion = mazdaki
                                        has_province_modifier = secret_mazdaki_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = manichean }
                                    NOR = {
                                        religion = manichean
                                        has_province_modifier = secret_manichean_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = hindu }
                                    NOR = {
                                        religion = hindu
                                        has_province_modifier = secret_hindu_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = buddhist }
                                    NOR = {
                                        religion = buddhist
                                        has_province_modifier = secret_buddhist_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = jain }
                                    NOR = {
                                        religion = jain
                                        has_province_modifier = secret_jain_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = norse_pagan_reformed }
                                    NOR = {
                                        religion = norse_pagan_reformed
                                        has_province_modifier = secret_norse_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = norse_pagan }
                                    NOR = {
                                        religion = norse_pagan
                                        has_province_modifier = secret_norse_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = baltic_pagan_reformed }
                                    NOR = {
                                        religion = baltic_pagan_reformed
                                        has_province_modifier = secret_baltic_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = baltic_pagan }
                                    NOR = {
                                        religion = baltic_pagan
                                        has_province_modifier = secret_baltic_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = finnish_pagan_reformed }
                                    NOR = {
                                        religion = finnish_pagan_reformed
                                        has_province_modifier = secret_finnish_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = finnish_pagan }
                                    NOR = {
                                        religion = finnish_pagan
                                        has_province_modifier = secret_finnish_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = slavic_pagan_reformed }
                                    NOR = {
                                        religion = slavic_pagan_reformed
                                        has_province_modifier = secret_slavic_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = slavic_pagan }
                                    NOR = {
                                        religion = slavic_pagan
                                        has_province_modifier = secret_slavic_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = tengri_pagan_reformed }
                                    NOR = {
                                        religion = tengri_pagan_reformed
                                        has_province_modifier = secret_tengri_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = tengri_pagan }
                                    NOR = {
                                        religion = tengri_pagan
                                        has_province_modifier = secret_tengri_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = west_african_pagan_reformed }
                                    NOR = {
                                        religion = west_african_pagan_reformed
                                        has_province_modifier = secret_west_african_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = west_african_pagan }
                                    NOR = {
                                        religion = west_african_pagan
                                        has_province_modifier = secret_west_african_pagan_community
                                    }
                                }
                                AND = { 
                                    ROOT = { secret_religion = zun_pagan_reformed }
                                    NOR = {
                                        religion = zun_pagan_reformed
                                        has_province_modifier = secret_zun_pagan_reformed_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = zun_pagan }
                                    NOR = {
                                        religion = zun_pagan
                                        has_province_modifier = secret_zun_pagan_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = aztec }
                                    NOR = {
                                        religion = aztec
                                        has_province_modifier = secret_aztec_community
                                    }
                                }
								AND = { 
                                    ROOT = { secret_religion = aztec_reformed }
                                    NOR = {
                                        religion = aztec_reformed
                                        has_province_modifier = secret_aztec_reformed_community
                                    }
                                }
								AND = {
                                    ROOT = { secret_religion = pelagian }
                                    NOR = {
                                        religion = pelagian
                                        has_province_modifier = secret_pelagian_community
                                    }
                                }
                            }
            			}
					}
				}
				event_target:society_leader = { character_event = { id = MNM.3900 } }
			}
            10 = { #Blend In
                trigger  = {
					any_courtier = {
						religion = ROOT
						shares_prevs_secret_religion_trigger = no
						NOT = { same_society_as = ROOT }   
						is_adult = yes
					}
                }
				modifier = {
					factor = 1.5
					check_variable = { which = visibility_value value = 10 }
				}
				modifier = {
					factor = 2
					check_variable = { which = visibility_value value = 20 }
				}
                event_target:society_leader = { character_event = { id = MNM.3397 } }
            }
            10 = { #Conduct Secret Ceremony
                event_target:society_leader = { character_event = { id = MNM.3233 } }
            }
			120 = { # AI bypasses missions at times
				modifier = {
					factor = 0
					ai = no
				}
				random_list = {
					70 = {
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
						add_mission_succeed_influence_effect = yes
						if = { # AI Members of Secret Religious Cults level up more often
							limit = {
								society_rank < 3
								society_can_rank_up = yes
							}
							random_list = {
								50 = {}
								50 = {
									society_rank_up = 1
								}
							}
						}
					}
					30 = {
						add_mission_fail_influence_effect = yes
					}
				}
			}
		}
    }
}

# Religion specific visiting of house of worship
character_event = {
    id = MNM.3225
    picture = "GFX_evt_secret_ceremony"
    border = GFX_event_normal_frame_religion
    is_triggered_only = yes

    hide_from = yes

     desc = {
        trigger = {
            OR = {
                religion = catholic
                religion = cathar
                religion = fraticelli
                religion = waldensian
                religion = lollard
                religion = nestorian
                religion = messalian
                religion = pelagian
            }
        }
        text = EVTDESC_MNM_3225_A
    }
    desc = {
        trigger = {
            OR = {
                religion = orthodox
                religion = bogomilist             
                religion = monothelite
                religion = iconoclast
                religion = paulician
                religion = miaphysite
                religion = monophysite
            }
        }
        text = EVTDESC_MNM_3225_A
    }
    desc = {
        trigger = { religion_group = jewish_group }
        text = EVTDESC_MNM_3225_A
    }
    desc = {
        trigger = {
            religion = sunni
            religion = zikri
            religion = yazidi
            religion = ibadi
            religion = kharijite
        }
        text = EVTDESC_MNM_3225_D
    }
    desc = {
        trigger = { religion_group = zoroastrian_group }
        text = EVTDESC_MNM_3225_E
    }
    desc = {
        trigger = {
            OR = {
                religion = shiite
                religion = druze
                religion = hurufi
            }
        }
        text = EVTDESC_MNM_3225_D
    }
    desc = {
        trigger = { religion = hindu }
        text = EVTDESC_MNM_3225_G
    }
    desc = {
        trigger = { religion = buddhist }
        text = EVTDESC_MNM_3225_H
    }
    desc = {
        trigger = { religion = jain }
        text = EVTDESC_MNM_3225_G
    }
    desc = {
        trigger = {
            OR = {
                religion = norse_pagan_reformed
                religion = norse_pagan
            }
        }
        text = EVTDESC_MNM_3225_J
    }
    desc = {
        trigger = {
            OR = {
                religion = baltic_pagan_reformed
                religion = baltic_pagan
            }
        }
        text = EVTDESC_MNM_3225_J
    }
    desc = {
        trigger = {
            OR = {
                religion = finnish_pagan_reformed
                religion = finnish_pagan
            }
        }
        text = EVTDESC_MNM_3225_J
    }
    desc = {
        trigger = {
            OR = {
                religion = slavic_pagan_reformed
                religion = slavic_pagan
            }
        }
        text = EVTDESC_MNM_3225_J
    }
    desc = {
        trigger = {
            OR = {
                religion = tengri_pagan_reformed
                religion = tengri_pagan
            }
        }
        text = EVTDESC_MNM_3225_N
    }
    desc = {
        trigger = {
            OR = {
                religion = west_african_pagan_reformed
                religion = west_african_pagan
            }
        }
        text = EVTDESC_MNM_3225_O
    }
    desc = {
        trigger = {
            OR = {
                religion = zun_pagan_reformed
                religion = zun_pagan
            }
        }
        text = EVTDESC_MNM_3225_P
    }
    desc = {
        trigger = {
            OR = {
                religion = hellenic_pagan
                religion = pagan
            }
        }
        text = EVTDESC_MNM_3225_P
    }

    hide_from = yes

    option = {      
        name = EVTOPTB_MNM_3225
        random_list = {
            50 = { #good outcome (big)
                modifier = {
                    factor = 0
                    trait = imbecile
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 15
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 16
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 17
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 18
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 19
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 20
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 21
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 22
                }
                modifier = {
                    factor = 1.1
                    trait = deceitful
                }
                modifier = {
                    factor = 1.1
                    trait = gregarious
                }
                modifier = {
                    factor = 1.1
                    trait = zealous
                }
                modifier = {
                    factor = 1.1
                    trait = cynical
                }
                custom_tooltip = {
                    text = EVTOPTA_MNM_3209_TOOLTIP_SUCCESS
                    long_character_event = { id = MNM.3228 } 
                }
            }
            50 = { #bad outcome (big)
                modifier = {
                    factor = 0
                    trait = genius
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 10 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 9 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 8 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 7 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 6 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 5 }
                }
                modifier = {
                    factor = 1.2
                    NOT = { diplomacy = 4 }
                }
                modifier = {
                    factor = 1.3
                    NOT = { diplomacy = 3 }
                }
                modifier = {
                    factor = 1.4
                    NOT = { diplomacy = 2 }
                }
                modifier = {
                    factor = 1.5
                    NOT = { diplomacy = 1 }
                }
                modifier = {
                    factor = 1.1
                    trait = shy
                }
                modifier = {
                    factor = 1.1
                    trait = content
                }
                custom_tooltip = {
                    text = EVTOPTB_MNM_3209_TOOLTIP_FAILURE
                    long_character_event = { id = MNM.3229 } 
                }
            }
        }
    }
    option = {      
        name = EVTOPTA_MNM_3225

        #add negative effect, trait or loss of something

        random_list = {
            70 = { #good outcome (small)
                modifier = {
                    factor = 0
                    trait = imbecile
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 15
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 16
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 17
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 18
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 19
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 20
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 21
                }
                modifier = {
                    factor = 1.1
                    diplomacy = 22
                }
                modifier = {
                    factor = 1.1
                    trait = deceitful
                }
                modifier = {
                    factor = 1.1
                    trait = gregarious
                }
                modifier = {
                    factor = 1.1
                    trait = zealous
                }
                modifier = {
                    factor = 1.1
                    trait = cynical
                }
                custom_tooltip = {
                    text = EVTOPTB_MNM_3209_TOOLTIP_SUCCESS
                    long_character_event = { id = MNM.3226 }
                }
            }
            30 = { #bad outcome (small)
                modifier = {
                    factor = 0
                    trait = genius
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 10 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 9 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 8 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 7 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 6 }
                }
                modifier = {
                    factor = 1.1
                    NOT = { diplomacy = 5 }
                }
                modifier = {
                    factor = 1.2
                    NOT = { diplomacy = 4 }
                }
                modifier = {
                    factor = 1.3
                    NOT = { diplomacy = 3 }
                }
                modifier = {
                    factor = 1.4
                    NOT = { diplomacy = 2 }
                }
                modifier = {
                    factor = 1.5
                    NOT = { diplomacy = 1 }
                }
                modifier = {
                    factor = 1.1
                    trait = shy
                }
                modifier = {
                    factor = 1.1
                    trait = content
                }
                custom_tooltip = {
                    text = EVTOPTA_MNM_3209_TOOLTIP_FAILURE
                    long_character_event = { id = MNM.3227 } 
                }
            }
        }
    }
}

long_character_event = { #Outcome 1 (small gain)
    id = MNM.3226
    picture = "GFX_evt_secret_ceremony"
    border = GFX_event_long_frame_religion
    is_triggered_only = yes

    desc = {
        trigger = {
            OR = {
                religion = catholic
                religion = cathar
                religion = fraticelli
                religion = waldensian
                religion = lollard
                religion = nestorian
                religion = messalian
                religion = pelagian
            }
        }
        text = EVTDESC_MNM_3226_A
    }
    desc = {
        trigger = {
            OR = {
                religion = orthodox
                religion = bogomilist
                religion = monothelite
                religion = iconoclast
                religion = paulician
                religion = miaphysite
                religion = monophysite
            }
        }
        text = EVTDESC_MNM_3226_A
    }
    desc = {
        trigger = { religion_group = jewish_group }
        text = EVTDESC_MNM_3226_A
    }
    desc = {
        trigger = {
            religion = sunni
            religion = zikri
            religion = yazidi
            religion = ibadi
            religion = kharijite
        }
        text = EVTDESC_MNM_3226_D
    }
    desc = {
        trigger = { religion_group = zoroastrian_group }
        text = EVTDESC_MNM_3226_E
    }
    desc = {
        trigger = {
            OR = {
                religion = shiite
                religion = druze
                religion = hurufi
            }
        }
        text = EVTDESC_MNM_3226_F
    }
    desc = {
        trigger = { religion = hindu }
        text = EVTDESC_MNM_3226_G
    }
    desc = {
        trigger = { religion = buddhist }
        text = EVTDESC_MNM_3226_H
    }
    desc = {
        trigger = { religion = jain }
        text = EVTDESC_MNM_3226_G
    }
    desc = {
        trigger = {
            OR = {
                religion = norse_pagan_reformed
                religion = norse_pagan
            }
        }
        text = EVTDESC_MNM_3226_J
    }
    desc = {
        trigger = {
            OR = {
                religion = baltic_pagan_reformed
                religion = baltic_pagan
            }
        }
        text = EVTDESC_MNM_3226_G
    }
    desc = {
        trigger = {
            OR = {
                religion = finnish_pagan_reformed
                religion = finnish_pagan
            }
        }
        text = EVTDESC_MNM_3226_G
    }
    desc = {
        trigger = {
            OR = {
                religion = slavic_pagan_reformed
                religion = slavic_pagan
            }
        }
        text = EVTDESC_MNM_3226_G
    }
    desc = {
        trigger = {
            OR = {
                religion = tengri_pagan_reformed
                religion = tengri_pagan
            }
        }
        text = EVTDESC_MNM_3226_N
    }
    desc = {
        trigger = {
            OR = {
                religion = west_african_pagan_reformed
                religion = west_african_pagan
            }
        }
        text = EVTDESC_MNM_3226_O
    }
    desc = {
        trigger = {
            OR = {
                religion = zun_pagan_reformed
                religion = zun_pagan
            }
        }
        text = EVTDESC_MNM_3226_P
    }
    desc = {
        trigger = {
            OR = {
                religion = hellenic_pagan
                religion = pagan
            }
        }
        text = EVTDESC_MNM_3226_A
    }

    hide_from = yes

    option = {      
        name = EVTOPTA_MNM_3226
        custom_tooltip = { text = EVTOPTA_3221_TOOLTIP }
        hidden_effect = { change_variable = { which = blending_in_points value = 1 } }
    }
}

long_character_event = { #Outcome 2 (small loss)
    id = MNM.3227
    picture = "GFX_evt_uncomfortable"
    border = GFX_event_long_frame_religion
    is_triggered_only = yes

   desc = {
        trigger = {
            OR = {
                religion = catholic
                religion = cathar
                religion = fraticelli
                religion = waldensian
                religion = lollard
                religion = nestorian
                religion = messalian
                religion = pelagian
            }
        }
        text = EVTDESC_MNM_3227_A
    }
    desc = {
        trigger = {
            OR = {
                religion = orthodox
                religion = bogomilist             
                religion = monothelite
                religion = iconoclast
                religion = paulician
                religion = miaphysite
                religion = monophysite
            }
        }
        text = EVTDESC_MNM_3227_A
    }
    desc = {
        trigger = { religion_group = jewish_group }
        text = EVTDESC_MNM_3227_A
    }
    desc = {
        trigger = {
            religion = sunni
            religion = zikri
            religion = yazidi
            religion = ibadi
            religion = kharijite
        }
        text = EVTDESC_MNM_3227_D
    }
    desc = {
        trigger = { religion_group = zoroastrian_group }
        text = EVTDESC_MNM_3227_E
    }
    desc = {
        trigger = {
            OR = {
                religion = shiite
                religion = druze
                religion = hurufi
            }
        }
        text = EVTDESC_MNM_3227_F
    }
    desc = {
        trigger = { religion = hindu }
        text = EVTDESC_MNM_3227_G
    }
    desc = {
        trigger = { religion = buddhist }
        text = EVTDESC_MNM_3227_G
    }
    desc = {
        trigger = { religion = jain }
        text = EVTDESC_MNM_3227_G
    }
    desc = {
        trigger = {
            OR = {
                religion = norse_pagan_reformed
                religion = norse_pagan
            }
        }
        text = EVTDESC_MNM_3227_J
    }
    desc = {
        trigger = {
            OR = {
                religion = baltic_pagan_reformed
                religion = baltic_pagan
            }
        }
        text = EVTDESC_MNM_3227_J
    }
    desc = {
        trigger = {
            OR = {
                religion = finnish_pagan_reformed
                religion = finnish_pagan
            }
        }
        text = EVTDESC_MNM_3227_J
    }
    desc = {
        trigger = {
            OR = {
                religion = slavic_pagan_reformed
                religion = slavic_pagan
            }
        }
        text = EVTDESC_MNM_3227_J
    }
    desc = {
        trigger = {
            OR = {
                religion = tengri_pagan_reformed
                religion = tengri_pagan
            }
        }
        text = EVTDESC_MNM_3227_N
    }
    desc = {
        trigger = {
            OR = {
                religion = west_african_pagan_reformed
                religion = west_african_pagan
            }
        }
        text = EVTDESC_MNM_3227_O
    }
    desc = {
        trigger = {
            OR = {
                religion = zun_pagan_reformed
                religion = zun_pagan
            }
        }
        text = EVTDESC_MNM_3227_P
    }
    desc = {
        trigger = {
            OR = {
                religion = hellenic_pagan
                religion = pagan
            }
        }
        text = EVTDESC_MNM_3227_P
    }


    hide_from = yes

    option = {
        name = EVTOPTA_MNM_3227
        custom_tooltip = { text = EVTOPTA_3222_TOOLTIP }
        hidden_effect = { change_variable = { which = blending_in_points value = -1 } }
    }
}

long_character_event = { #Outcome 3 (big gain)
    id = MNM.3228
    picture = "GFX_evt_secret_ceremony"
    border = GFX_event_long_frame_religion
    is_triggered_only = yes

    desc = {
        trigger = {
            OR = {
                religion = catholic
                religion = cathar
                religion = fraticelli
                religion = waldensian
                religion = lollard
                religion = nestorian
                religion = messalian
                religion = pelagian
            }
        }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = {
            OR = {
                religion = orthodox
                religion = bogomilist             
                religion = monothelite
                religion = iconoclast
                religion = paulician
                religion = miaphysite
                religion = monophysite
            }
        }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = { religion_group = jewish_group }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = {
            religion = sunni
            religion = zikri
            religion = yazidi
            religion = ibadi
            religion = kharijite
        }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = { religion_group = zoroastrian_group }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = {
            OR = {
                religion = shiite
                religion = druze
                religion = hurufi
            }
        }
        text = EVTDESC_MNM_3228_A
    }
    desc = {
        trigger = { religion = hindu }
        text = EVTDESC_MNM_3228_G
    }
    desc = {
        trigger = { religion = buddhist }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = { religion = jain }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = norse_pagan_reformed
                religion = norse_pagan
            }
        }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = baltic_pagan_reformed
                religion = baltic_pagan
            }
        }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = finnish_pagan_reformed
                religion = finnish_pagan
            }
        }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = slavic_pagan_reformed
                religion = slavic_pagan
            }
        }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = tengri_pagan_reformed
                religion = tengri_pagan
            }
        }
        text = EVTDESC_MNM_3228_H
    }
    desc = {
        trigger = {
            OR = {
                religion = west_african_pagan_reformed
                religion = west_african_pagan
            }
        }
        text = EVTDESC_MNM_3228_O
    }
    desc = {
        trigger = {
            OR = {
                religion = zun_pagan_reformed
                religion = zun_pagan
            }
        }
        text = EVTDESC_MNM_3228_O
    }
    desc = {
        trigger = {
            OR = {
                religion = hellenic_pagan
                religion = pagan
            }
        }
        text = EVTDESC_MNM_3228_O
    }


    hide_from = yes

    option = {      
        name = EVTOPTA_MNM_3228
        custom_tooltip = { text = EVTOPTA_3223_TOOLTIP }
        hidden_effect = { change_variable = { which = blending_in_points value = 2 } }
    }
}

long_character_event = { #Outcome 4 (big loss)
    id = MNM.3229
    picture = "GFX_evt_uncomfortable"
    border = GFX_event_long_frame_religion
    is_triggered_only = yes

    desc = {
        trigger = {
            OR = {
                religion = catholic
                religion = cathar
                religion = fraticelli
                religion = waldensian
                religion = lollard
                religion = nestorian
                religion = messalian
				religion = pelagian
            }
        }
        text = EVTDESC_MNM_3229_A
    }
    desc = {
        trigger = {
            OR = {
                religion = orthodox
                religion = bogomilist             
                religion = monothelite
                religion = iconoclast
                religion = paulician
                religion = miaphysite
                religion = monophysite
            }
        }
        text = EVTDESC_MNM_3229_A
    }
    desc = {
        trigger = { religion_group = jewish_group }
        text = EVTDESC_MNM_3229_C
    }
    desc = {
        trigger = {
            religion = sunni
            religion = zikri
            religion = yazidi
            religion = ibadi
            religion = kharijite
        }
        text = EVTDESC_MNM_3229_D
    }
    desc = {
        trigger = { religion_group = zoroastrian_group }
        text = EVTDESC_MNM_3229_D
    }
    desc = {
        trigger = {
            OR = {
                religion = shiite
                religion = druze
                religion = hurufi
            }
        }
        text = EVTDESC_MNM_3229_D
    }
    desc = {
        trigger = { religion = hindu }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = { religion = buddhist }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = { religion = jain }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = norse_pagan_reformed
                religion = norse_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = baltic_pagan_reformed
                religion = baltic_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = finnish_pagan_reformed
                religion = finnish_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = slavic_pagan_reformed
                religion = slavic_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = tengri_pagan_reformed
                religion = tengri_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = west_african_pagan_reformed
                religion = west_african_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = zun_pagan_reformed
                religion = zun_pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }
    desc = {
        trigger = {
            OR = {
                religion = hellenic_pagan
                religion = pagan
            }
        }
        text = EVTDESC_MNM_3229_G
    }


    hide_from = yes

    option = {      
        name = EVTOPTA_MNM_3229
        custom_tooltip = { text = EVTOPTA_3224_TOOLTIP }
        hidden_effect = { change_variable = { which = blending_in_points value = -2 } }
    }
}

# openly_adopt_faith - Allow sympathisers the chance to flip
character_event = {
	id = MNM.3810
	desc = EVTDESC_MNM_3810
    picture = GFX_evt_society_joining
    border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			ai = yes
			is_nomadic = yes
			NOR = {
				AND = {
					FROM = { 
						OR = {
							society_member_of = secret_religious_society_sunni
							society_member_of = secret_religious_society_shiite
							society_member_of = secret_religious_society_zikri
							society_member_of = secret_religious_society_yazidi
							society_member_of = secret_religious_society_ibadi
							society_member_of = secret_religious_society_kharijite
							society_member_of = secret_religious_society_druze
							society_member_of = secret_religious_society_hurufi
						}
					}
					NOT = { has_dlc = "The Sword of Islam" }
				}
				AND = {
					FROM = { 
						society_member_of = secret_religious_society_jewish
						society_member_of = secret_religious_society_karaite
						society_member_of = secret_religious_society_samaritan
					}
					NOT = { has_dlc = "Sons of Abraham" }
				}
				AND = {
					FROM = { 
						OR = { 
							society_member_of = secret_religious_society_zoroastrian
							society_member_of = secret_religious_society_mazdaki
							society_member_of = secret_religious_society_manichean
							society_member_of = secret_religious_society_norse_pagan
							society_member_of = secret_religious_society_slavic_pagan
							society_member_of = secret_religious_society_tengri_pagan
							society_member_of = secret_religious_society_baltic_pagan
							society_member_of = secret_religious_society_finnish_pagan
							society_member_of = secret_religious_society_west_african_pagan
							society_member_of = secret_religious_society_zun_pagan	
							society_member_of = secret_religious_society_norse_pagan_reformed
							society_member_of = secret_religious_society_slavic_pagan_reformed
							society_member_of = secret_religious_society_tengri_pagan_reformed
							society_member_of = secret_religious_society_baltic_pagan_reformed
							society_member_of = secret_religious_society_finnish_pagan_reformed
							society_member_of = secret_religious_society_west_african_pagan_reformed
							society_member_of = secret_religious_society_zun_pagan_reformed
						}
					}
					NOT = { has_dlc = "The Old Gods" }
				}
				AND = {
					FROM = { 
						OR = {
							society_member_of = secret_religious_society_hindu
							society_member_of = secret_religious_society_buddhist
							society_member_of = secret_religious_society_jain
						}
					}
					NOT = { has_dlc = "Rajas of India" }
				}
			}
		}
	}
	
	immediate = {
		FROM = {
			trigger_switch = { # Figure out which society is uncovering itself
				on_trigger = society_member_of
				secret_religious_society_catholic = { 
					ROOT = { set_character_flag = adopt_faith_catholic }
				}
				secret_religious_society_cathar = { 
					ROOT = { set_character_flag = adopt_faith_cathar }
				}
				secret_religious_society_fraticelli = { 
					ROOT = { set_character_flag = adopt_faith_fraticelli }
				}
				secret_religious_society_waldensian = { 
					ROOT = { set_character_flag = adopt_faith_waldensian }
				}
				secret_religious_society_lollard = { 
					ROOT = { set_character_flag = adopt_faith_lollard }
				}
				secret_religious_society_orthodox = { 
					ROOT = { set_character_flag = adopt_faith_orthodox }
				}
				secret_religious_society_miaphysite = { 
					ROOT = { set_character_flag = adopt_faith_miaphysite }
				}
				secret_religious_society_monophysite = { 
					ROOT = { set_character_flag = adopt_faith_monophysite }
				}
				secret_religious_society_bogomilist = { 
					ROOT = { set_character_flag = adopt_faith_bogomilist }
				}
				secret_religious_society_monothelite = { 
					ROOT = { set_character_flag = adopt_faith_monothelite }
				}
				secret_religious_society_iconoclast = { 
					ROOT = { set_character_flag = adopt_faith_iconoclast }
				}
				secret_religious_society_paulician = { 
					ROOT = { set_character_flag = adopt_faith_paulician }
				}
				secret_religious_society_nestorian = { 
					ROOT = { set_character_flag = adopt_faith_nestorian }
				}
				secret_religious_society_messalian = { 
					ROOT = { set_character_flag = adopt_faith_messalian }
				}
				secret_religious_society_sunni = { 
					ROOT = { set_character_flag = adopt_faith_sunni }
				}
				secret_religious_society_zikri = { 
					ROOT = { set_character_flag = adopt_faith_zikri }
				}
				secret_religious_society_yazidi = { 
					ROOT = { set_character_flag = adopt_faith_yazidi }
				}
				secret_religious_society_ibadi = { 
					ROOT = { set_character_flag = adopt_faith_ibadi }
				}
				secret_religious_society_kharijite = { 
					ROOT = { set_character_flag = adopt_faith_kharijite }
				}
				secret_religious_society_shiite = { 
					ROOT = { set_character_flag = adopt_faith_shiite }
				}
				secret_religious_society_druze = { 
					ROOT = { set_character_flag = adopt_faith_druze }
				}
				secret_religious_society_hurufi = { 
					ROOT = { set_character_flag = adopt_faith_hurufi }
				}
				secret_religious_society_jewish = { 
					ROOT = { set_character_flag = adopt_faith_jewish }
				}
				secret_religious_society_karaite = { 
					ROOT = { set_character_flag = adopt_faith_karaite }
				}
				secret_religious_society_samaritan = { 
					ROOT = { set_character_flag = adopt_faith_samaritan }
				}
				secret_religious_society_zoroastrian = { 
					ROOT = { set_character_flag = adopt_faith_zoroastrian }
				}
				secret_religious_society_mazdaki = { 
					ROOT = { set_character_flag = adopt_faith_mazdaki }
				}
				secret_religious_society_manichean = { 
					ROOT = { set_character_flag = adopt_faith_manichean }
				}
				secret_religious_society_hindu = { 
					ROOT = { set_character_flag = adopt_faith_hindu }
				}
				secret_religious_society_buddhist = { 
					ROOT = { set_character_flag = adopt_faith_buddhist }
				}
				secret_religious_society_jain = { 
					ROOT = { set_character_flag = adopt_faith_jain }
				}
				secret_religious_society_norse_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_norse_reformed }
				}
				secret_religious_society_slavic_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_slavic_reformed } 
				}
				secret_religious_society_tengri_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_tengri_reformed } 
				}
				secret_religious_society_baltic_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_baltic_reformed } 
				}
				secret_religious_society_finnish_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_finnish_reformed }
				}
				secret_religious_society_west_african_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_west_african_reformed }
				}
				secret_religious_society_zun_pagan_reformed = { 
					ROOT = { set_character_flag = adopt_faith_zun_reformed } 
				}
				secret_religious_society_norse_pagan = { 
					ROOT = { set_character_flag = adopt_faith_norse }
				}
				secret_religious_society_slavic_pagan = { 
					ROOT = { set_character_flag = adopt_faith_slavic } 
				}
				secret_religious_society_tengri_pagan = { 
					ROOT = { set_character_flag = adopt_faith_tengri } 
				}
				secret_religious_society_baltic_pagan = { 
					ROOT = { set_character_flag = adopt_faith_baltic } 
				}
				secret_religious_society_finnish_pagan = { 
					ROOT = { set_character_flag = adopt_faith_finnish }
				}
				secret_religious_society_west_african_pagan = { 
					ROOT = { set_character_flag = adopt_faith_west_african }
				}
				secret_religious_society_zun_pagan = { 
					ROOT = { set_character_flag = adopt_faith_zun } 
				}
				secret_religious_society_aztec = { 
					ROOT = { set_character_flag = adopt_faith_aztec }
				}
				secret_religious_society_aztec_reformed = { 
					ROOT = { set_character_flag = adopt_faith_aztec_reformed } 
				}
				secret_religious_society_pelagian = { 
					ROOT = { set_character_flag = adopt_faith_pelagian }
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_MNM_3810 
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.3
				FROM = {
					diplomacy = 7
				}
			}
			modifier = {
				factor = 1.3
				FROM = {
					diplomacy = 10
				}
			}
			modifier = {
				factor = 1.3
				FROM = {
					diplomacy = 13
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					diplomacy = 15
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					diplomacy = 17
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					diplomacy = 19
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					diplomacy = 21
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					diplomacy = 23
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					diplomacy = 25
				}
			}
		}
		if = {
			limit = {
				OR = {
					religion_group = muslim
					religion = norse_pagan_reformed
				}
				any_demesne_title = {
					controls_religion = yes
				}
			}
			any_demesne_title = {
				limit = {
					controls_religion = yes
				}
				destroy_landed_title = THIS
			}
		}
		if = {
			limit = {
				NOR = {
					religion_group = muslim
					religion = norse_pagan_reformed
				}
				any_demesne_title = {
					controls_religion = yes
				}
			}
			hidden_tooltip = {
				liege = {
					save_event_target_as = liege_target
				}
				create_character = {
					age = 38
					dynasty = random
					religion = ROOT
					culture = ROOT
					random_traits = yes
				}
				new_character = {
					save_event_target_as = new_holder
				}
			}
			any_demesne_title = {
				limit = {
					controls_religion = yes
				}
				grant_title = event_target:new_holder
				holder_scope = {
					any_vassal = {
						set_defacto_liege = event_target:liege_target
					}
				}
			}
			hidden_tooltip = {
				set_defacto_liege = event_target:liege_target
			}
		}
		if = { # Holy Orders/Static Mercs are given to a random new character
			limit = {
				any_demesne_title = {
					OR = {
						holy_order = yes
						mercenary = yes
					}
				}
			}
			hidden_tooltip = {
				liege = {
					save_event_target_as = liege_target
				}
				create_character = {
					age = 38
					dynasty = random
					religion = ROOT
					culture = ROOT
					random_traits = yes
				}
				new_character = {
					save_event_target_as = new_holder
				}
			}
			any_demesne_title = {
				limit = {
					OR = {
						holy_order = yes
						mercenary = yes
					}
				}
				grant_title = event_target:new_holder
				holder_scope = {
					any_vassal = {
						set_defacto_liege = event_target:liege_target
					}
				}
			}
			hidden_tooltip = {
				set_defacto_liege = event_target:liege_target
			}
		}
		trigger_switch = {
			on_trigger = has_character_flag
			adopt_faith_catholic = {
				religion = catholic
			}
			adopt_faith_cathar = {
				religion = cathar
			}
			adopt_faith_fraticelli = {
				religion = fraticelli
			}
			adopt_faith_waldensian = {
				religion = waldensian
			}
			adopt_faith_lollard = {
				religion = lollard
			}
			adopt_faith_orthodox = {
				religion = orthodox
			}
			adopt_faith_miaphysite = {
				religion = miaphysite
			}
			adopt_faith_monophysite = {
				religion = monophysite
			}
			adopt_faith_bogomilist = {
				religion = bogomilist
			}
			adopt_faith_monothelite = {
				religion = monothelite
			}
			adopt_faith_iconoclast = {
				religion = iconoclast
			}
			adopt_faith_paulician = {
				religion = paulician
			}
			adopt_faith_nestorian = {
				religion = nestorian
			}
			adopt_faith_messalian = {
				religion = messalian
			}
			adopt_faith_sunni = {
				religion = sunni
			}
			adopt_faith_zikri = {
				religion = zikri
			}
			adopt_faith_yazidi = {
				religion = yazidi
			}
			adopt_faith_ibadi = {
				religion = ibadi
			}
			adopt_faith_kharijite = {
				religion = kharijite
			}
			adopt_faith_shiite = {
				religion = shiite
			}
			adopt_faith_druze = {
				religion = druze
			}
			adopt_faith_hurufi = {
				religion = hurufi
			}
			adopt_faith_jewish = {
				religion = jewish
			}
			adopt_faith_karaite = {
				religion = karaite
			}
			adopt_faith_samaritan = {
				religion = samaritan
			}
			adopt_faith_zoroastrian = {
				religion = zoroastrian
			}
			adopt_faith_mazdaki = {
				religion = mazdaki
			}
			adopt_faith_manichean = {
				religion = manichean
			}
			adopt_faith_hindu = {
				religion = hindu
			}
			adopt_faith_buddhist = {
				religion = buddhist
			}
			adopt_faith_jain = {
				religion = jain
			}
			adopt_faith_norse_reformed = {
				religion = norse_pagan_reformed
			}
			adopt_faith_slavic_reformed = {
				religion = slavic_pagan_reformed
			}
			adopt_faith_tengri_reformed = {
				religion = tengri_pagan_reformed
			}
			adopt_faith_baltic_reformed = {
				religion = baltic_pagan_reformed
			}
			adopt_faith_finnish_reformed = {
				religion = finnish_pagan_reformed
			}
			adopt_faith_west_african_reformed = {
				religion = west_african_pagan_reformed
			}
			adopt_faith_zun_reformed  = {
				religion = zun_pagan_reformed
			}
			adopt_faith_norse = {
				religion = norse_pagan
			}
			adopt_faith_slavic = {
				religion = slavic_pagan
			}
			adopt_faith_tengri = {
				religion = tengri_pagan
			}
			adopt_faith_baltic = {
				religion = baltic_pagan
			}
			adopt_faith_finnish = {
				religion = finnish_pagan
			}
			adopt_faith_west_african = {
				religion = west_african_pagan
			}
			adopt_faith_zun = {
				religion = zun_pagan
			}
			adopt_faith_aztec = {
				religion = aztec
			}
			adopt_faith_aztec_reformed = {
				religion = aztec_reformed
			}
			adopt_faith_pelagian = {
				religion = pelagian
			}
		}
		clear_secret_religion = yes
        if = {
            limit = { ai = yes }
            set_character_flag = ai_flag_refuse_conversion
        }
	}
	
	option = {
		name = EVTOPTB_MNM_3810
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.05
				FROM = {
					ROOT = {
						has_prevs_secret_religion_truly_trigger = yes
					}
				}
			}
		}
	}
	
	after = {
		set_character_flag = currently_part_of_secret_religion_uncovering
		
		clr_character_flag = adopt_faith_catholic
		clr_character_flag = adopt_faith_cathar
		clr_character_flag = adopt_faith_fraticelli
		clr_character_flag = adopt_faith_waldensian
		clr_character_flag = adopt_faith_lollard
		clr_character_flag = adopt_faith_orthodox
		clr_character_flag = adopt_faith_miaphysite
		clr_character_flag = adopt_faith_monophysite
		clr_character_flag = adopt_faith_bogomilist
		clr_character_flag = adopt_faith_monothelite
		clr_character_flag = adopt_faith_iconoclast
		clr_character_flag = adopt_faith_paulician
		clr_character_flag = adopt_faith_nestorian
		clr_character_flag = adopt_faith_messalian
		clr_character_flag = adopt_faith_sunni
		clr_character_flag = adopt_faith_zikri
		clr_character_flag = adopt_faith_yazidi
		clr_character_flag = adopt_faith_ibadi
		clr_character_flag = adopt_faith_kharijite
		clr_character_flag = adopt_faith_shiite
		clr_character_flag = adopt_faith_druze
		clr_character_flag = adopt_faith_hurufi
		clr_character_flag = adopt_faith_jewish
		clr_character_flag = adopt_faith_karaite
		clr_character_flag = adopt_faith_samaritan
		clr_character_flag = adopt_faith_zoroastrian
		clr_character_flag = adopt_faith_mazdaki
		clr_character_flag = adopt_faith_manichean
		clr_character_flag = adopt_faith_hindu
		clr_character_flag = adopt_faith_buddhist
		clr_character_flag = adopt_faith_jain
		clr_character_flag = adopt_faith_norse_reformed
		clr_character_flag = adopt_faith_slavic_reformed
		clr_character_flag = adopt_faith_tengri_reformed
		clr_character_flag = adopt_faith_baltic_reformed
		clr_character_flag = adopt_faith_finnish_reformed
		clr_character_flag = adopt_faith_west_african_reformed
		clr_character_flag = adopt_faith_zun_reformed
		clr_character_flag = adopt_faith_norse
		clr_character_flag = adopt_faith_slavic
		clr_character_flag = adopt_faith_tengri
		clr_character_flag = adopt_faith_baltic
		clr_character_flag = adopt_faith_finnish
		clr_character_flag = adopt_faith_west_african
		clr_character_flag = adopt_faith_zun
		clr_character_flag = adopt_faith_aztec
		clr_character_flag = adopt_faith_aztec_reformed
		clr_character_flag = adopt_faith_pelagian
	}
}

# openly_adopt_faith - Flip provinces with local cult modifier
character_event = {
	id = MNM.3820
	desc = EVTDESC_MNM_3820
    picture = GFX_evt_society_joining
    border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			trigger_switch = {
				on_trigger = society_member_of
				secret_religious_society_catholic = {
					ROOT = {
						set_character_flag = sr_catholic_prov_flip
					}
				}
				secret_religious_society_cathar = {
					ROOT = {
						set_character_flag = sr_cathar_prov_flip
					}
				}
				secret_religious_society_fraticelli = {
					ROOT = {
						set_character_flag = sr_fraticelli_prov_flip
					}
				}
				secret_religious_society_waldensian = {
					ROOT = {
						set_character_flag = sr_waldensian_prov_flip
					}
				}
				secret_religious_society_lollard = {
					ROOT = {
						set_character_flag = sr_lollard_prov_flip
					}
				}
				secret_religious_society_orthodox = { 
					ROOT = {
						set_character_flag = sr_orthodox_prov_flip
					}
				}
				secret_religious_society_miaphysite = { 
					ROOT = {
						set_character_flag = sr_miaphysite_prov_flip
					}
				}
				secret_religious_society_monophysite = { 
					ROOT = {
						set_character_flag = sr_monophysite_prov_flip
					}
				}
				secret_religious_society_bogomilist = { 
					ROOT = {
						set_character_flag = sr_bogomilist_prov_flip
					}
				}
				secret_religious_society_monothelite = { 
					ROOT = {
						set_character_flag = sr_monothelite_prov_flip
					}
				}
				secret_religious_society_iconoclast = { 
					ROOT = {
						set_character_flag = sr_iconoclast_prov_flip
					}
				}
				secret_religious_society_paulician = { 
					ROOT = {
						set_character_flag = sr_paulician_prov_flip
					}
				}
				secret_religious_society_nestorian = { 
					ROOT = {
						set_character_flag = sr_nestorian_prov_flip
					}
				}
				secret_religious_society_messalian = { 
					ROOT = {
						set_character_flag = sr_messalian_prov_flip
					}
				}
				secret_religious_society_sunni = { 
					ROOT = {
						set_character_flag = sr_sunni_prov_flip
					}
				}
				secret_religious_society_zikri = { 
					ROOT = {
						set_character_flag = sr_zikri_prov_flip
					}
				}
				secret_religious_society_yazidi = { 
					ROOT = {
						set_character_flag = sr_yazidi_prov_flip
					}
				}
				secret_religious_society_ibadi = { 
					ROOT = {
						set_character_flag = sr_ibadi_prov_flip
					}
				}
				secret_religious_society_kharijite = { 
					ROOT = {
						set_character_flag = sr_kharijite_prov_flip
					}
				}
				secret_religious_society_shiite = { 
					ROOT = {
						set_character_flag = sr_shiite_prov_flip
					}
				}
				secret_religious_society_druze = { 
					ROOT = {
						set_character_flag = sr_druze_prov_flip
					}
				}
				secret_religious_society_hurufi = { 
					ROOT = {
						set_character_flag = sr_hurufi_prov_flip
					}
				}
				secret_religious_society_jewish = { 
					ROOT = {
						set_character_flag = sr_jewish_prov_flip
					}
				}
				secret_religious_society_karaite = { 
					ROOT = {
						set_character_flag = sr_karaite_prov_flip
					}
				}
				secret_religious_society_samaritan = { 
					ROOT = {
						set_character_flag = sr_samaritan_prov_flip
					}
				}
				secret_religious_society_zoroastrian = { 
					ROOT = {
						set_character_flag = sr_zoroastrian_prov_flip
					}
				}
				secret_religious_society_mazdaki = { 
					ROOT = {
						set_character_flag = sr_mazdaki_prov_flip
					}
				}
				secret_religious_society_manichean = { 
					ROOT = {
						set_character_flag = sr_manichean_prov_flip
					}
				}
				secret_religious_society_hindu = { 
					ROOT = {
						set_character_flag = sr_hindu_prov_flip
					}
				}
				secret_religious_society_buddhist = { 
					ROOT = {
						set_character_flag = sr_buddhist_prov_flip
					}
				}
				secret_religious_society_jain = { 
					ROOT = {
						set_character_flag = sr_jain_prov_flip
					}
				}
				secret_religious_society_norse_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_norse_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_slavic_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_slavic_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_tengri_pagan_reformed = {
					ROOT = {
						set_character_flag = sr_tengri_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_baltic_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_baltic_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_finnish_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_finnish_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_west_african_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_west_african_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_zun_pagan_reformed = { 
					ROOT = {
						set_character_flag = sr_zun_pagan_reformed_prov_flip
					}
				}
				secret_religious_society_norse_pagan = { 
					ROOT = {
						set_character_flag = sr_norse_pagan_prov_flip
					}
				}
				secret_religious_society_slavic_pagan = { 
					ROOT = {
						set_character_flag = sr_slavic_pagan_prov_flip
					}
				}
				secret_religious_society_tengri_pagan = {
					ROOT = {
						set_character_flag = sr_tengri_pagan_prov_flip
					}
				}
				secret_religious_society_baltic_pagan = { 
					ROOT = {
						set_character_flag = sr_baltic_pagan_prov_flip
					}
				}
				secret_religious_society_finnish_pagan = { 
					ROOT = {
						set_character_flag = sr_finnish_pagan_prov_flip
					}
				}
				secret_religious_society_west_african_pagan = { 
					ROOT = {
						set_character_flag = sr_west_african_pagan_prov_flip
					}
				}
				secret_religious_society_zun_pagan = { 
					ROOT = {
						set_character_flag = sr_zun_pagan_prov_flip
					}
				} 
				secret_religious_society_aztec = { 
					ROOT = {
						set_character_flag = sr_aztec_prov_flip
					}
				}
				secret_religious_society_aztec_reformed = { 
					ROOT = {
						set_character_flag = sr_aztec_reformed_prov_flip
					}
				}
				secret_religious_society_pelagian = {
					ROOT = {
						set_character_flag = sr_pelagian_prov_flip
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_MNM_3820
		
		trigger_switch = {
			on_trigger = has_character_flag
			
			sr_catholic_prov_flip = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_catholic_community
					}
					religion = catholic
					remove_province_modifier = secret_catholic_community
				}
			}
			sr_cathar_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_cathar_community
					}
					religion = cathar
					remove_province_modifier = secret_cathar_community
				}
			}
			sr_fraticelli_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_fraticelli_community
					}
					religion = fraticelli
					remove_province_modifier = secret_fraticelli_community
				}
			}
			sr_waldensian_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_waldensian_community
					}
					religion = waldensian
					remove_province_modifier = secret_waldensian_community
				}
			}
			sr_lollard_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_lollard_community
					}
					religion = lollard
					remove_province_modifier = secret_lollard_community
				}
			}
			sr_orthodox_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_orthodox_community
					}
					religion = orthodox
					remove_province_modifier = secret_orthodox_community
				}
			}
			sr_miaphysite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_miaphysite_community
					}
					religion = miaphysite
					remove_province_modifier = secret_miaphysite_community
				}
			}
			sr_monophysite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_monophysite_community
					}
					religion = monophysite
					remove_province_modifier = secret_monophysite_community
				}
			}
			sr_bogomilist_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_bogomilist_community
					}
					religion = bogomilist
					remove_province_modifier = secret_bogomilist_community
				}
			}
			sr_monothelite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_monothelite_community
					}
					religion = monothelite
					remove_province_modifier = secret_monothelite_community
				}
			}
			sr_iconoclast_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_iconoclast_community
					}
					religion = iconoclast
					remove_province_modifier = secret_iconoclast_community
				}
			}
			sr_paulician_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_paulician_community
					}
					religion = paulician
					remove_province_modifier = secret_paulician_community
				}
			}
			sr_nestorian_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_nestorian_community
					}
					religion = nestorian
					remove_province_modifier = secret_nestorian_community
				}
			}
			sr_messalian_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_messalian_community
					}
					religion = messalian
					remove_province_modifier = secret_messalian_community
				}
			}
			sr_sunni_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_sunni_community
					}
					religion = sunni
					remove_province_modifier = secret_sunni_community
				}
			}
			sr_zikri_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_zikri_community
					}
					religion = zikri
					remove_province_modifier = secret_zikri_community
				}
			}
			sr_yazidi_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_yazidi_community
					}
					religion = yazidi
					remove_province_modifier = secret_yazidi_community
				}
			}
			sr_ibadi_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_ibadi_community
					}
					religion = ibadi
					remove_province_modifier = secret_ibadi_community
				}
			}
			sr_kharijite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_kharijite_community
					}
					religion = kharijite
					remove_province_modifier = secret_kharijite_community
				}
			}
			sr_shiite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_shiite_community
					}
					religion = shiite
					remove_province_modifier = secret_shiite_community
				}
			}
			sr_druze_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_druze_community
					}
					religion = druze
					remove_province_modifier = secret_druze_community
				}
			}
			sr_hurufi_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hurufi_community
					}
					religion = hurufi
					remove_province_modifier = secret_hurufi_community
				}
			}
			sr_jewish_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jewish_community
					}
					religion = jewish
					remove_province_modifier = secret_jewish_community
				}
			}
			sr_karaite_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_karaite_community
					}
					religion = karaite
					remove_province_modifier = secret_karaite_community
				}
			}
			sr_samaritan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_samaritan_community
					}
					religion = samaritan
					remove_province_modifier = secret_samaritan_community
				}
			}
			sr_zoroastrian_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_zoroastrian_community
					}
					religion = zoroastrian
					remove_province_modifier = secret_zoroastrian_community
				}
			}
			sr_mazdaki_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_mazdaki_community
					}
					religion = mazdaki
					remove_province_modifier = secret_mazdaki_community
				}
			}
			sr_manichean_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_manichean_community
					}
					religion = manichean
					remove_province_modifier = secret_manichean_community
				}
			}
			sr_hindu_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_hindu_community
					}
					religion = hindu
					remove_province_modifier = secret_hindu_community
				}
			}
			sr_buddhist_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_buddhist_community
					}
					religion = buddhist
					remove_province_modifier = secret_buddhist_community
				}
			}
			sr_jain_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_jain_community
					}
					religion = jain
					remove_province_modifier = secret_jain_community
				}
			}
			sr_norse_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_reformed_community
					}
					religion = norse_pagan_reformed
					remove_province_modifier = secret_norse_pagan_reformed_community
				}
			}
			sr_slavic_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_slavic_pagan_reformed_community
					}
					religion = slavic_pagan_reformed
					remove_province_modifier = secret_slavic_pagan_reformed_community
				}
			}
			sr_tengri_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_tengri_pagan_reformed_community
					}
					religion = tengri_pagan_reformed
					remove_province_modifier = secret_tengri_pagan_reformed_community
				}
			}
			sr_baltic_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_baltic_pagan_reformed_community
					}
					religion = baltic_pagan_reformed
					remove_province_modifier = secret_baltic_pagan_reformed_community
				}
			}
			sr_finnish_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_finnish_pagan_reformed_community
					}
					religion = finnish_pagan_reformed
					remove_province_modifier = secret_finnish_pagan_reformed_community
				}
			}
			sr_west_african_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_west_african_pagan_reformed_community
					}
					religion = west_african_pagan_reformed
					remove_province_modifier = secret_west_african_pagan_reformed_community
				}
			}
			sr_zun_pagan_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_zun_pagan_reformed_community
					}
					religion = zun_pagan_reformed 
					remove_province_modifier = secret_zun_pagan_reformed_community
				}
			}
			sr_norse_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_norse_pagan_community
					}
					religion = norse_pagan
					remove_province_modifier = secret_norse_pagan_community
				}
			}
			sr_slavic_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_slavic_pagan_community
					}
					religion = slavic_pagan
					remove_province_modifier = secret_slavic_pagan_community
				}
			}
			sr_tengri_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_tengri_pagan_community
					}
					religion = tengri_pagan
					remove_province_modifier = secret_tengri_pagan_community
				}
			}
			sr_baltic_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_baltic_pagan_community
					}
					religion = baltic_pagan
					remove_province_modifier = secret_baltic_pagan_community
				}
			}
			sr_finnish_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_finnish_pagan_community
					}
					religion = finnish_pagan
					remove_province_modifier = secret_finnish_pagan_community
				}
			}
			sr_west_african_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_west_african_pagan_community
					}
					religion = west_african_pagan
					remove_province_modifier = secret_west_african_pagan_community
				}
			}
			sr_zun_pagan_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_zun_pagan_community
					}
					religion = zun_pagan 
					remove_province_modifier = secret_zun_pagan_community
				}
			}
			sr_aztec_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_aztec_community
					}
					religion = aztec
					remove_province_modifier = secret_aztec_community
				}
			}
			sr_aztec_reformed_prov_flip = { 
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_aztec_reformed_community
					}
					religion = aztec_reformed 
					remove_province_modifier = secret_aztec_reformed_community
				}
			}
			sr_pelagian_prov_flip = {
				any_demesne_province = {
					limit = {
						has_province_modifier = secret_pelagian_community
					}
					religion = pelagian
					remove_province_modifier = secret_pelagian_community
				}
			}
		}
		clr_character_flag = sr_catholic_prov_flip
		clr_character_flag = sr_cathar_prov_flip
		clr_character_flag = sr_fraticelli_prov_flip
		clr_character_flag = sr_waldensian_prov_flip
		clr_character_flag = sr_lollard_prov_flip
		clr_character_flag = sr_orthodox_prov_flip
		clr_character_flag = sr_miaphysite_prov_flip
		clr_character_flag = sr_monophysite_prov_flip
		clr_character_flag = sr_bogomilist_prov_flip
		clr_character_flag = sr_monothelite_prov_flip
		clr_character_flag = sr_iconoclast_prov_flip
		clr_character_flag = sr_paulician_prov_flip
		clr_character_flag = sr_nestorian_prov_flip
		clr_character_flag = sr_messalian_prov_flip
		clr_character_flag = sr_sunni_prov_flip
		clr_character_flag = sr_zikri_prov_flip
		clr_character_flag = sr_yazidi_prov_flip
		clr_character_flag = sr_ibadi_prov_flip
		clr_character_flag = sr_kharijite_prov_flip
		clr_character_flag = sr_shiite_prov_flip
		clr_character_flag = sr_druze_prov_flip
		clr_character_flag = sr_hurufi_prov_flip
		clr_character_flag = sr_jewish_prov_flip
		clr_character_flag = sr_karaite_prov_flip
		clr_character_flag = sr_samaritan_prov_flip
		clr_character_flag = sr_zoroastrian_prov_flip
		clr_character_flag = sr_mazdaki_prov_flip
		clr_character_flag = sr_manichean_prov_flip
		clr_character_flag = sr_hindu_prov_flip
		clr_character_flag = sr_buddhist_prov_flip
		clr_character_flag = sr_jain_prov_flip
		clr_character_flag = sr_norse_pagan_reformed_prov_flip
		clr_character_flag = sr_slavic_pagan_reformed_prov_flip
		clr_character_flag = sr_tengri_pagan_reformed_prov_flip
		clr_character_flag = sr_baltic_pagan_reformed_prov_flip
		clr_character_flag = sr_finnish_pagan_reformed_prov_flip
		clr_character_flag = sr_west_african_pagan_reformed_prov_flip
		clr_character_flag = sr_zun_pagan_reformed_prov_flip
		clr_character_flag = sr_norse_pagan_prov_flip
		clr_character_flag = sr_slavic_pagan_prov_flip
		clr_character_flag = sr_tengri_pagan_prov_flip
		clr_character_flag = sr_baltic_pagan_prov_flip
		clr_character_flag = sr_finnish_pagan_prov_flip
		clr_character_flag = sr_west_african_pagan_prov_flip
		clr_character_flag = sr_zun_pagan_prov_flip
		clr_character_flag = sr_aztec_prov_flip
		clr_character_flag = sr_aztec_reformed_prov_flip
		clr_character_flag = sr_pelagian_prov_flip
	}
}

character_event = {
	id = MNM.3890
	desc = EVTDESC_MNM_3890
	picture = GFX_evt_secret_ceremony
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_MNM_3890
		trigger_switch = {
			on_trigger = secret_religion
			catholic = {
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_catholic_community
						duration = -1
					} 
				}
			}
			cathar = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_cathar_community
						duration = -1
					} 
				}
			}
			fraticelli = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_fraticelli_community
						duration = -1
					} 
				}
			}
			waldensian = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_waldensian_community
						duration = -1
					} 
				}
			}
			lollard = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_lollard_community
						duration = -1
					} 
				}
			}
			orthodox = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_orthodox_community
						duration = -1
					} 
				}
			}
			miaphysite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_miaphysite_community
						duration = -1
					} 
				}
			}
			monophysite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_monophysite_community
						duration = -1
					} 
				}
			}
			bogomilist = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_bogomilist_community
						duration = -1
					} 
				}
			}
			monothelite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_monothelite_community
						duration = -1
					} 
				}
			}
			iconoclast = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_iconoclast_community
						duration = -1
					} 
				}
			}
			paulician = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_paulician_community
						duration = -1
					} 
				}
			}
			nestorian = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_nestorian_community
						duration = -1
					} 
				}
			}
			messalian = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_messalian_community
						duration = -1
					} 
				}
			}
			sunni = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_sunni_community
						duration = -1
					} 
				}
			}
			zikri = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_zikri_community
						duration = -1
					} 
				}
			}
			yazidi = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_yazidi_community
						duration = -1
					} 
				}
			}
			ibadi = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_ibadi_community
						duration = -1
					} 
				}
			}
			kharijite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_kharijite_community
						duration = -1
					} 
				}
			}
			shiite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_shiite_community
						duration = -1
					} 
				}
			}
			druze = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_druze_community
						duration = -1
					} 
				}
			}
			hurufi = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_hurufi_community
						duration = -1
					} 
				}
			}
			jewish = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_jewish_community
						duration = -1
					} 
				}
			}
			karaite = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_karaite_community
						duration = -1
					} 
				}
			}
			samaritan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_samaritan_community
						duration = -1
					} 
				}
			}
			zoroastrian = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_zoroastrian_community
						duration = -1
					} 
				}
			}
			mazdaki = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_mazdaki_community
						duration = -1
					} 
				}
			}
			manichean = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_manichean_community
						duration = -1
					} 
				}
			}
			hindu = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_hindu_community
						duration = -1
					} 
				}
			}
			buddhist = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_buddhist_community
						duration = -1
					} 
				}
			}
			jain = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_jain_community
						duration = -1
					} 
				}
			}
			norse_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_norse_pagan_reformed_community
						duration = -1
					} 
				}
			}
			baltic_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_baltic_pagan_reformed_community
						duration = -1
					} 
				}
			}
			finnish_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_finnish_pagan_reformed_community
						duration = -1
					} 
				}
			}
			slavic_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_slavic_pagan_reformed_community
						duration = -1
					} 
				}
			}
			tengri_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_tengri_pagan_reformed_community
						duration = -1
					} 
				}
			}
			west_african_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_west_african_pagan_reformed_community
						duration = -1
					} 
				}
			}
			zun_pagan_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_zun_pagan_reformed_community
						duration = -1
					} 
				}
			}
			norse_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_norse_pagan_community
						duration = -1
					} 
				}
			}
			baltic_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_baltic_pagan_community
						duration = -1
					} 
				}
			}
			finnish_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_finnish_pagan_community
						duration = -1
					} 
				}
			}
			slavic_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_slavic_pagan_community
						duration = -1
					} 
				}
			}
			tengri_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_tengri_pagan_community
						duration = -1
					} 
				}
			}
			west_african_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_west_african_pagan_community
						duration = -1
					} 
				}
			}
			zun_pagan = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_zun_pagan_community
						duration = -1
					} 
				}
			}
			aztec = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_aztec_community
						duration = -1
					} 
				}
			}
			aztec_reformed = { 
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_aztec_reformed_community
						duration = -1
					} 
				}
			}
			pelagian = {
				event_target:target_province = { 
					add_province_modifier = { 
						name = secret_pelagian_community
						duration = -1
					} 
				}
			}
		}
		if = {
			limit = {
				has_quest = quest_secret_religions_societies_prepare_grounds
				event_target:target_province = {
					is_quest_target_of = ROOT
				}
			}
			clr_quest = quest_secret_religions_societies_prepare_grounds
			
			add_society_currency_minor_effect = yes
		}
		clear_delayed_event = { id = MNM.3849 }
		clr_character_flag = preparing_grounds_in_@target_province
		
		hidden_effect = {
			clear_delayed_event = { id = MNM.3859 }
		}
	}
}

society_quest_event = {
	id = MNM.3901
    border = GFX_event_letter_frame_religion

    desc = EVTDESC_MNM_3901

    is_triggered_only = yes
	
	immediate = {
		random_demesne_province = {
			limit = {
				OR = {
                    AND = { 
                        ROOT = { secret_religion = catholic }
                        NOR = {
                            religion = catholic
                            has_province_modifier = secret_catholic_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = cathar }
                        NOR = {
                            religion = cathar
                            has_province_modifier = secret_cathar_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = fraticelli }
                        NOR = {
                            religion = fraticelli
                            has_province_modifier = secret_fraticelli_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = waldensian }
                        NOR = {
                            religion = waldensian
                            has_province_modifier = secret_waldensian_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = lollard }
                        NOR = {
                            religion = lollard
                            has_province_modifier = secret_lollard_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = orthodox }
                        NOR = {
                            religion = orthodox
                            has_province_modifier = secret_orthodox_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = miaphysite }
                        NOR = {
                            religion = miaphysite
                            has_province_modifier = secret_miaphysite_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = monophysite }
                        NOR = {
                            religion = monophysite
                            has_province_modifier = secret_monophysite_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = bogomilist }
                        NOR = {
                            religion = bogomilist
                            has_province_modifier = secret_bogomilist_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = monothelite }
                        NOR = {
                            religion = monothelite
                            has_province_modifier = secret_monothelite_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = iconoclast }
                        NOR = {
                            religion = iconoclast
                            has_province_modifier = secret_iconoclast_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = paulician }
                        NOR = {
                            religion = paulician
                            has_province_modifier = secret_paulician_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = nestorian }
                        NOR = {
                            religion = nestorian
                            has_province_modifier = secret_nestorian_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = messalian }
                        NOR = {
                            religion = messalian
                            has_province_modifier = secret_messalian_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = sunni }
                        NOR = {
                            religion = sunni
                            has_province_modifier = secret_sunni_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = zikri }
                        NOR = {
                            religion = zikri
                            has_province_modifier = secret_zikri_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = yazidi }
                        NOR = {
                            religion = yazidi
                            has_province_modifier = secret_yazidi_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = ibadi }
                        NOR = {
                            religion = ibadi
                            has_province_modifier = secret_ibadi_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = kharijite }
                        NOR = {
                            religion = kharijite
                            has_province_modifier = secret_kharijite_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = shiite }
                        NOR = {
                            religion = shiite
                            has_province_modifier = secret_shiite_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = druze }
                        NOR = {
                            religion = druze
                            has_province_modifier = secret_druze_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = hurufi }
                        NOR = {
                            religion = hurufi
                            has_province_modifier = secret_hurufi_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = jewish }
                        NOR = {
                            religion = jewish
                            has_province_modifier = secret_jewish_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = karaite }
                        NOR = {
                            religion = karaite
                            has_province_modifier = secret_karaite_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = samaritan }
                        NOR = {
                            religion = samaritan
                            has_province_modifier = secret_samaritan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = zoroastrian }
                        NOR = {
                            religion = zoroastrian
                            has_province_modifier = secret_zoroastrian_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = mazdaki }
                        NOR = {
                            religion = mazdaki
                            has_province_modifier = secret_mazdaki_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = manichean }
                        NOR = {
                            religion = manichean
                            has_province_modifier = secret_manichean_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = hindu }
                        NOR = {
                            religion = hindu
                            has_province_modifier = secret_hindu_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = buddhist }
                        NOR = {
                            religion = buddhist
                            has_province_modifier = secret_buddhist_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = jain }
                        NOR = {
                            religion = jain
                            has_province_modifier = secret_jain_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = norse_pagan_reformed }
                        NOR = {
                            religion = norse_pagan_reformed
                            has_province_modifier = secret_norse_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = baltic_pagan_reformed }
                        NOR = {
                            religion = baltic_pagan_reformed
                            has_province_modifier = secret_baltic_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = finnish_pagan_reformed }
                        NOR = {
                            religion = finnish_pagan_reformed
                            has_province_modifier = secret_finnish_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = slavic_pagan_reformed }
                        NOR = {
                            religion = slavic_pagan_reformed
                            has_province_modifier = secret_slavic_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = tengri_pagan_reformed }
                        NOR = {
                            religion = tengri_pagan_reformed
                            has_province_modifier = secret_tengri_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = west_african_pagan_reformed }
                        NOR = {
                            religion = west_african_pagan_reformed
                            has_province_modifier = secret_west_african_pagan_reformed_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = zun_pagan_reformed }
                        NOR = {
                            religion = zun_pagan_reformed
                            has_province_modifier = secret_zun_pagan_reformed_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = norse_pagan }
                        NOR = {
                            religion = norse_pagan
                            has_province_modifier = secret_norse_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = baltic_pagan }
                        NOR = {
                            religion = baltic_pagan
                            has_province_modifier = secret_baltic_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = finnish_pagan }
                        NOR = {
                            religion = finnish_pagan
                            has_province_modifier = secret_finnish_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = slavic_pagan }
                        NOR = {
                            religion = slavic_pagan
                            has_province_modifier = secret_slavic_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = tengri_pagan }
                        NOR = {
                            religion = tengri_pagan
                            has_province_modifier = secret_tengri_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = west_african_pagan }
                        NOR = {
                            religion = west_african_pagan
                            has_province_modifier = secret_west_african_pagan_community
                        }
                    }
                    AND = { 
                        ROOT = { secret_religion = zun_pagan }
                        NOR = {
                            religion = zun_pagan
                            has_province_modifier = secret_zun_pagan_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = aztec }
                        NOR = {
                            religion = aztec
                            has_province_modifier = secret_aztec_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = aztec_reformed }
                        NOR = {
                            religion = aztec_reformed
                            has_province_modifier = secret_aztec_reformed_community
                        }
                    }
					AND = { 
                        ROOT = { secret_religion = pelagian }
                        NOR = {
                            religion = pelagian
                            has_province_modifier = secret_pelagian_community
                        }
                    }
                }
			}
			save_event_target_as = target_province
		}
	}

    option = {
        name = ACCEPT
		event_target:target_province = {
			set_quest_target = {
				id = quest_secret_religions_societies_prepare_grounds
				holder = ROOT
			}
		}
    }

    option = {
        name = DECLINE
        custom_tooltip = { text = decline_quest_tooltip }

        add_character_modifier = {
            name = quest_cooldown_timer
            hidden = yes
            days = 1000
        }

        ai_chance = { factor = 0 }
    }
}

#Character gets option to secretly keep old religion
character_event = {
    id = MNM.3949
    desc = EVTDESC_MNM_3949
    picture = GFX_evt_uncomfortable
    border = GFX_event_normal_frame_religion

    is_triggered_only = yes

    hide_from = yes
    
    trigger = {
        has_secret_religion_trait_trigger = no
        has_any_char_old_religion = yes
    }

    immediate = {
        event_target_old_religion_from_flag_effect = yes
        FROM = { FROMFROM = { save_event_target_as = demander } }
    }

    option = {
        name = EVTOPTA_MNM_3949
        ai_chance = {
            factor = 50
            modifier = {
                trait = zealous 
                factor = 1.5
            }
            modifier = {
                trait = brave 
                factor = 1.5
            }
            modifier = {
                OR = {
                    AND = {
                        has_character_flag = character_was_catholic
                        liege = { secret_religion = catholic }
                    }
					AND = {
                        has_character_flag = character_was_cathar
                        liege = { secret_religion = cathar }
                    }
					AND = {
                        has_character_flag = character_was_fraticelli
                        liege = { secret_religion = fraticelli }
                    }
					AND = {
                        has_character_flag = character_was_waldensian
                        liege = { secret_religion = waldensian }
                    }
					AND = {
                        has_character_flag = character_was_lollard
                        liege = { secret_religion = lollard }
                    }
                    AND = {
                        has_character_flag = character_was_orthodox
                        liege = { secret_religion = orthodox }
                    }
					AND = {
                        has_character_flag = character_was_miaphysite
                        liege = { secret_religion = miaphysite }
                    }
					AND = {
                        has_character_flag = character_was_monophysite
                        liege = { secret_religion = monophysite }
                    }
					AND = {
                        has_character_flag = character_was_bogomilist
                        liege = { secret_religion = bogomilist }
                    }
					AND = {
                        has_character_flag = character_was_monothelite
                        liege = { secret_religion = monothelite }
                    }
					AND = {
                        has_character_flag = character_was_iconoclast
                        liege = { secret_religion = iconoclast }
                    }
					AND = {
                        has_character_flag = character_was_paulician
                        liege = { secret_religion = paulician }
                    }
					AND = {
                        has_character_flag = character_was_nestorian
                        liege = { secret_religion = nestorian }
                    }
					AND = {
                        has_character_flag = character_was_messalian
                        liege = { secret_religion = messalian }
                    }
                    AND = {
                        has_character_flag = character_was_sunni
                        liege = { secret_religion = sunni }
                    }
					AND = {
                        has_character_flag = character_was_zikri
                        liege = { secret_religion = zikri }
                    }
					AND = {
                        has_character_flag = character_was_yazidi
                        liege = { secret_religion = yazidi }
                    }
					AND = {
                        has_character_flag = character_was_ibadi
                        liege = { secret_religion = ibadi }
                    }
					AND = {
                        has_character_flag = character_was_kharijite
                        liege = { secret_religion = kharijite }
                    }
                    AND = {
                        has_character_flag = character_was_shiite
                        liege = { secret_religion = shiite }
                    }
					AND = {
                        has_character_flag = character_was_druze
                        liege = { secret_religion = druze }
                    }
					AND = {
                        has_character_flag = character_was_hurufi
                        liege = { secret_religion = hurufi }
                    }
                    AND = {
                        has_character_flag = character_was_jewish
                        liege = { secret_religion = jewish }
                    }
					AND = {
                        has_character_flag = character_was_karaite
                        liege = { secret_religion = karaite }
                    }
					AND = {
                        has_character_flag = character_was_samaritan
                        liege = { secret_religion = samaritan }
                    }
                    AND = {
                        has_character_flag = character_was_zoroastrian
                        liege = { secret_religion = zoroastrian }
                    }
					AND = {
                        has_character_flag = character_was_mazdaki
                        liege = { secret_religion = mazdaki }
                    }
					AND = {
                        has_character_flag = character_was_manichean
                        liege = { secret_religion = manichean }
                    }
                    AND = {
                        has_character_flag = character_was_hindu
                        liege = { secret_religion = hindu }
                    }
                    AND = {
                        has_character_flag = character_was_buddhist
                        liege = { secret_religion = buddhist }
                    }
                    AND = {
                        has_character_flag = character_was_jain
                        liege = { secret_religion = jain }
                    }
                    AND = {
                        has_character_flag = character_was_norse_pagan_reformed
                        liege = { secret_religion = norse_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_slavic_pagan_reformed
                        liege = { secret_religion = slavic_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_tengri_pagan_reformed
                        liege = { secret_religion = tengri_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_baltic_pagan_reformed
                        liege = { secret_religion = baltic_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_finnish_pagan_reformed
                        liege = { secret_religion = finnish_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_west_african_pagan_reformed
                        liege = { secret_religion = west_african_pagan_reformed }
                    }
                    AND = {
                        has_character_flag = character_was_zun_pagan_reformed
                        liege = { secret_religion = zun_pagan_reformed }
                    }
					 AND = {
                        has_character_flag = character_was_norse_pagan
                        liege = { secret_religion = norse_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_slavic_pagan
                        liege = { secret_religion = slavic_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_tengri_pagan
                        liege = { secret_religion = tengri_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_baltic_pagan
                        liege = { secret_religion = baltic_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_finnish_pagan
                        liege = { secret_religion = finnish_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_west_african_pagan
                        liege = { secret_religion = west_african_pagan }
                    }
                    AND = {
                        has_character_flag = character_was_zun_pagan
                        liege = { secret_religion = zun_pagan }
                    }
					AND = {
                        has_character_flag = character_was_aztec
                        liege = { secret_religion = aztec }
                    }
					AND = {
                        has_character_flag = character_was_aztec_reformed
                        liege = { secret_religion = aztec_reformed }
                    }
					AND = {
                        has_character_flag = character_was_pelagian
                        liege = { secret_religion = pelagian }
                    }
                }
                factor = 500
            }
        }
		add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect = yes
        custom_tooltip = { text = EVTOPTA_MNM_3949_TT }
    }

    option = {
        name = EVTOPTB_MNM_3949
        ai_chance = {
            factor = 50
            modifier = {
                factor = 0.3
                trait = craven 
            }
        }
        custom_tooltip = { text = EVTOPTB_MNM_3949_TT }
    }    
}
